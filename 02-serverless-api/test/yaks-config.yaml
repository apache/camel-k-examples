config:
  namespace:
    temporary: true
pre:
- name: minio installation
  run: |
    kubectl apply -f minio.yaml -n ${YAKS_NAMESPACE}
    kubectl wait pod -l app=minio --for condition=Ready -n ${YAKS_NAMESPACE} --timeout=5m

- name: integration
  run: |
    kamel install -w -n ${YAKS_NAMESPACE}

    kamel run --name api MinioCustomizer.java ../API.java --property-file minio.properties --open-api ../openapi.yaml -d camel-openapi-java -t 3scale.enabled=true -t 3scale.description-path=/openapi.json --profile OpenShift -w -n ${YAKS_NAMESPACE}
